var login={init:function(){this.toggleBtn(),this.initEvent()},redirect:function(o,n,t){var e,i=Okay.util.searchUrl(o);"cart.html"==i.returnURL&&i.num?Okay.Ajax("post","/index.php?m=OkayMall&c=mobileCart&a=add",{gcount:i.num,goodsId:i.goodsId,mall_token:n}).done(function(o){window.location.href="cart.html"}):"member.html"==i.returnURL?window.location.href=t?"product.html?goodsId="+i.goodsId:"member.html":(e=i.returnURL?Okay.util.searchUrl(o).returnURL+Okay.util.splitUrl(o):"index.html",window.location.href=e)},toggleBtn:function(){window.okay||sessionStorage.getItem("isInIOSApp")?$("#phone").val(localStorage.getItem("phone")).prop("readonly",!0).parent().off().end().next().remove():($("#signup").show(),$("#forget-pwd").show())},initEvent:function(){var o=Okay.util,n=location.search,t=this;$("#submit").on("tap",function(){var e=$("#phone").val(),i=$("#pwd").val();o.isPhone(e)?""!=i?o.isPwd(i)?Okay.Ajax("post","/index.php?m=OkayMall&c=MobileUsers&a=login",{phone:e,password:i}).done(function(o){Okay.util.setCookie("mall_token",o.mall_token,24),t.redirect(n,o.mall_token,"Y"==o.member)}):Okay.popUp("手机号和密码不匹配"):Okay.popUp("密码未填写"):Okay.popUp("请输入正确的手机号")}),$(".back").on("tap",function(){window.history.back()}),$("#signup").on("tap",function(){window.location.href="signup.html"+n}),$("#forget-pwd").on("tap",function(){window.location.href="find-pwd.html"+n})}};