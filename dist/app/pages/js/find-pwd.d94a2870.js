var findPwd={timer:null,msg_disabled:!1,init:function(){this.initEvent()},countDown:function(){var a=60,e=this;this.timer=setInterval(function(){$("#msg-code").html(--a+"S"),0==a&&e.clearTimer()},1e3)},clearTimer:function(){clearInterval(this.timer),$("#msg-code").html("获取验证码").removeClass("disabled"),this.msg_disabled=!1},initEvent:function(){var a=Okay.util,e=this;$("#submit").on("tap",function(){var e=$("#phone").val(),i=$("#code").val();a.isPhone(e)?a.isMsgCode(i)?($(".loading-overlay").show(),$.ajax({type:"get",url:Okay.util.URL+"/index.php?c=MobileUsers&a=OkayMallFindPassSecond",data:{userPhone:e,verifyCode:i},dataType:"jsonp",jsonpCallback:"jsonpReturn"}).done(function(a){$(".loading-overlay").hide(),/200$/.test(a.status)?window.location.href="reset-pwd.html"+location.search:Okay.popUp(a.msg)}).fail(function(a,e){$(".loading-overlay").hide();var i="parsererror"==e?"数据返回格式错误":"网络异常";Okay.popUp(i)})):Okay.popUp("请输入正确的验证码"):Okay.popUp("请输入正确的手机号")}),$("#msg-code").on("tap",function(){var i=$("#phone").val();a.isPhone(i)?e.msg_disabled||(e.msg_disabled=!0,$(this).html("60S").addClass("disabled"),e.countDown(),$.ajax({type:"post",url:Okay.util.URL+"/index.php?c=MobileUsers&a=OkayMallFindPassFirst",data:{verifyTel:i},dataType:"jsonp",jsonpCallback:"jsonpReturn"}).done(function(a){/200$/.test(a.status)?Okay.popUp("验证码已发送"):(Okay.popUp(a.msg),e.clearTimer())}).fail(function(a,i){var n="parsererror"==i?"数据返回格式错误":"网络异常";Okay.popUp(n),e.clearTimer()})):Okay.popUp("请输入正确的手机号")}),$(".back").on("tap",function(){window.history.back()})}};