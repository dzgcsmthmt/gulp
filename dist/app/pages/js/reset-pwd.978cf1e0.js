var resetPwd={init:function(){this.initEvent()},redirect:function(a,t){var n,o=Okay.util.searchUrl(a);"cart.html"==o.returnURL&&o.num?Okay.Ajax("post","/index.php?m=OkayMall&c=mobileCart&a=add",{gcount:o.num,goodsId:o.goodsId,mall_token:t}).done(function(a){window.location.href="cart.html"}):(n=o.returnURL?Okay.util.searchUrl(a).returnURL+Okay.util.splitUrl(a):"index.html",window.location.href=n)},initEvent:function(){var a=Okay.util,t=this,n=3,o=null,i=location.search;$("#submit").on("tap",function(){var e=$("#pwd").val(),r=$("#re-pwd").val();a.isPwd(e)?a.isPwd(r)&&e==r?($(".loading-overlay").show(),$.ajax({type:"post",url:Okay.util.URL+"/index.php?c=MobileUsers&a=OkayMallFindPassThird",data:{password:e,comfirmPassword:r},dataType:"jsonp",jsonpCallback:"jsonpReturn"}).done(function(a){$(".loading-overlay").hide(),/200$/.test(a.status)?($("#page1").hide().next().show(),o=setInterval(function(){if(0==--n)return clearInterval(o),Okay.util.setCookie("mall_token",a.mall_token,24),void t.redirect(i,a.mall_token);$("#countDown").html(n)},1e3)):Okay.popUp(a.msg)}).fail(function(a,t){$(".loading-overlay").hide();var n="parsererror"==t?"数据返回格式错误":"网络异常";Okay.popUp(n)})):Okay.popUp("密码不一致"):Okay.popUp("请输入6-20位密码，只能为数字或者字母")}),$(".back").on("tap",function(){window.history.back()})}};